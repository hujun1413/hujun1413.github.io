---
title: Linux积累基础(16/12/19-)
date: 2016-12-19 19:25:26 # 文章生成时间，一般不改
categories:   # 文章分类目录，参数可省略
    - Linux
tags:   # 文章标签，参数可省略
---
##  [linux中 chmod +x 和 chmod u+x的区别](http://blog.csdn.net/uniquewonderq/article/details/50774484)
[linux 中更改用户权限和用户组的命令chmod,chgrp实例](http://www.cnblogs.com/zdz8207/p/3793246.html)

u 代表用户
g 代表用户组
o 代表其他
a 代表所有

u+x 只授予这个文件的所属者执行权限
+x=a+x 授予所有人执行权限

<!--more-->
## 查看各文件夹的空间使用情况
### 查看当前目录下：
```
sudo du -h --max-depth=1
```
### 查看整个系统：
```
df -h  //人类可读的形式显示
```

## make
```
make clean  //清除构建
make
```

## [在linux内核中操作文件：get_fs()和set_fs(KERNEL_DS)](http://blog.csdn.net/fuyajun01/article/details/8691385)
一个是要记得编译的时候加上`-D\\KERNEL_SYSCALLS\\`
另外源文件里面要`#include <linux/unistd.h>`

## [Make命令教程](http://www.ruanyifeng.com/blog/2015/02/make.html)
* 代码变成可执行文件，叫做编译（compile）；先编译这个，还是先编译那个（即编译的安排），叫做构建（build）。
* Make是最常用的构建工具，诞生于1977年，主要用于C语言的项目。但是实际上 ，任何只要某个文件有变化，就要重新构建的项目，都可以用Make构建。
* Make命令提供一系列内置变量，比如，$(CC) 指向当前使用的编译器，$(MAKE) 指向当前使用的Make工具。这主要是为了跨平台的兼容性

``` makefile
VARIABLE = value
# 在执行时扩展，允许递归扩展。

VARIABLE := value
# 在定义时扩展。

VARIABLE ?= value
# 只有在该变量为空时才设置值。

VARIABLE += value
# 将值追加到变量的尾端。


# 假定当前目录下有 f1.c 和 f2.c 两个源码文件，需要将它们编译为对应的对象文件。
%.o: %.c
等同于：
f1.o: f1.c
f2.o: f2.c
使用匹配符%，可以将大量同类型的文件，只用一条规则就完成构建。

test:
    @# 这是测试  注释：make会打印每条命令，前面加@可关闭打印
    @echo TODO   单纯的打印语句

```

## [linux源码Makefile详解](http://www.cnblogs.com/Daniel-G/p/3284831.html)
* obj-m用来定义哪些文件被编译成可加载模块(Loadable module)
* obj-m中定义的.o文件由当前目录下的.c或.S文件编译生成,它们被编译成模块，一个模块可以由一个或几个.o文件组成，对于有多个源文件的模块，除在obj-m中增加一个.o文件外，还要定义一个`<module_name>-objs`变量来告诉Makefile这个.o文件由哪些  文件组成
* 例如：
``` makefile
obj-$(CONFIG_ISDN) += isdn.o
isdn-objs := isdn_net_lib.o  isdn_v110.o  isdn_common.o
```

## `cat update.ll | wc -l`
获取update.ll文件的行数
`cat a.txt | grep ">" | wc -l`
* cat是打开一个文本文件的命令，|是管道，就是将cat命令的结果传给下一个命令，这里是grep
* grep是搜索命令，这里所有匹配“>” ，并将结果传给wc命令
* wc命令是统计命令，如文件的字符数等，wc -l是统计行数

## [dmesg > MMM.c](http://baike.baidu.com/link?url=KgdKEUAtKFIj1PEMrVT45PV7a7F9jU8QD1ZqStBvM-dvTHiPWWaEbTD04t_IGQSq)
dmesg用于检测和控制内核环缓冲。
-c　当完成打印显示后清除环缓冲内的内容。
将开机启动信息写入到MMM.c文件中

## [Linux shell命令中expr](http://wangqiaowqo.iteye.com/blog/1226953)
四则运算和字符串的操作：
$expr 10 + 10
20

提取指定字符的下标：expr index 内容 字符，例如：$ind=`expr index "$content" "="`

提取字符串的子串：expr substr 内容 起始位置 终点位置，例如：$con=`expr substr "$content" "1" $ind

## echo
`echo "hujun" > MMM.c`
将MMM.c清空，写入"hujun"
`echo "hujun1" >> MMM.c`
在MMM.c中追加写入"hujun1"

## [Ubuntu虚拟机里怎么编译内核](http://www.jb51.net/os/Ubuntu/307573.html)

## [linux内核中Kconfig及如何加自己的驱动](http://blog.csdn.net/duloveding/article/details/6782694)






















