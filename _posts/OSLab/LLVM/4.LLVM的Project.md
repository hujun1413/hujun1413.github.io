---
title:  4.LLVM的Project
date: 2016-11-12 18:35:26 # 文章生成时间，一般不改
categories:   # 文章分类目录，参数可省略
    - OSLab
    - LLVM
tags:   # 文章标签，参数可省略
---
## [阅读文档](http://llvm.org/docs/Projects.html)
[官网翻译+autoconf建工程](http://blog.csdn.net/ioripolo/article/details/5413343)
[如何建立LLVM的工程](http://blog.csdn.net/snsn1984/article/details/8099105)
<!--more-->
1. 将project目录下的sample文件夹拷贝一份到project目录下，命名为my_sample
2. 在my_sample/Makefile.common中，PROJECT_NAME := my_sample，PROJ_SRC_ROOT和PROJ_OBJ_ROOT都改成..../my_sample
3. 第2步可用以下步骤替换：将my_sample/autoconf中的configure.ac中的AC_INIT的第一个中括号内改成项目名为MY_SAMPLE，若工程不拷在project目录下，则AC_CONFIG_AUX_DIR需要修改使之指向其针对于autoconf目录的相对路径。然后在autoconf文件夹下执行./AutoRegen.sh，提示Your autoconf...则用sudo apt-get install autoconf安装autoconf。之后在想要存放中间对象的目录下运行configure
4. 貌似第2步直接`./configure; make`也可以，下次有机会再试试

添加lib库：
* 在my_sample/lib下复制sample文件夹命名为sample2
* 在my_sample/Makefile文件的DIRS=后面加上 sample2，在my_sample/lib/sample2/Makefile文件的LIBRARYNAME=my_sample（或者命名为你想要的名字xxx,最后生成的库为libxxx.a（最后生成在my_sample/Release+Asserts/lib目录下）
* 然后my_sample/lib/sample2下的.c文件自己写，my_sample/include下的.h文件自己写。
* 最后在my_sample/tools/sample目录下的Makefile中的TOOLNAME改成想要生成的可执行文件的名字，USEDLIBS=后面加上my_sample.a(xxx.a)表示要将新生成的库链接到程序中）

```

```