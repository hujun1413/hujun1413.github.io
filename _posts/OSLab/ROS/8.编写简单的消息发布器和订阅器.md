---
title:  8.编写简单的消息发布器和订阅器及测试
date: 2016-09-28 18:35:26 # 文章生成时间，一般不改
categories:   # 文章分类目录，参数可省略
    - OSLab
    - ROS
tags:   # 文章标签，参数可省略
---
## 编写发布器和订阅器
### 编写发布器节点
接下来，我们将会创建一个发布器节点("talker")，它将不断的在ROS网络中广播消息。
转移到之前教程在catkin工作空间所创建的beginner_tutorials package路径下:
<!--more-->
```bash
cd ~/catkin_ws/src/beginner_tutorials
```
源代码存在src/talker.cpp
### 编写订阅器节点
源代码存在src/listener.cpp
### 编译节点
```bash
# In your catkin workspace
catkin_make
```
注意:如果你是添加了新的package，你需要通过--force-cmake选项告诉catkin进行强制编译。参考[catkin/Tutorials/using_a_workspace#With_catkin_make](http://wiki.ros.org/catkin/Tutorials/using_a_workspace#With_catkin_make).
## 测试发布器和订阅器
### 启动发布器
如果使用catkin，确保你在调用catkin_make后，在运行你自己的程序前，已经source了catkin工作空间下的setup.sh文件：
```bash
# In your catkin workspace
cd ~/catkin_ws
source ./devel/setup.bash
```
启动发布器：
```bash
rosrun beginner_tutorials talker
```
### 启动订阅器
```bash
rosrun beginner_tutorials listener
```




